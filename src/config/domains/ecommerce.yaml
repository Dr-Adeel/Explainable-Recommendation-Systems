# ─────────────────────────────────────────────────────────────
# Domain Configuration — E-Commerce (Amazon Fashion)
# ─────────────────────────────────────────────────────────────
domain: ecommerce
display_name: "E-Commerce — Amazon Fashion"

# ── Data paths ──
data:
  items_path: "data/amazon/processed/items_with_images.parquet"
  embeddings_path: "data/amazon/processed/amazon_image_embeddings.parquet"
  catalog_path: "data/amazon/processed/amazon_clip_catalog.parquet"
  multimodal_embeddings_path: "data/embeddings/multimodal_embeddings.parquet"
  faiss_index_path: "data/embeddings/multimodal.faiss"
  text_embeddings_path: "data/embeddings/text_embeddings.parquet"
  surrogate_path: "data/models/surrogate_rf.joblib"
  feedback_path: "data/feedback/feedback.jsonl"
  images_dir: "data/amazon/images"
  als:
    model_dirs:
      - "data/amazon/processed/als/model"
      - "data/amazon/processed_small/als/model"
    csr_filename: "train_csr.npz"

# ── Column mapping ──
columns:
  item_id: "item_idx"
  item_raw_id: "item_raw_id"
  user_id: "user_idx"
  title: "title"
  category: "main_category"
  image_path: "image_path"
  rating: "rating"
  embedding: "embedding"

# ── Entities (for display & explanation) ──
entities:
  item_singular: "produit"
  item_plural: "produits"
  user_singular: "acheteur"
  user_plural: "acheteurs"
  interaction: "achat"
  category_label: "catégorie"

# ── Engine defaults ──
engines:
  hybrid_weights:
    alpha: 0.5   # image similarity
    beta: 0.4    # collaborative (ALS)
    gamma: 0.1   # popularity
  als:
    factors: 64
    iterations: 20
    regularization: 0.05
    alpha_confidence: 20.0
  clip_model: "openai/clip-vit-base-patch32"
  text_model: "all-MiniLM-L6-v2"
  multimodal_fusion:
    image_weight: 0.6
    text_weight: 0.4

# ── Explanation templates ──
explanations:
  fr:
    image_dominant: "Produit visuellement similaire (similarité image : {pct}%)."
    image_reinforced_als: "Produit visuellement similaire (similarité image : {pct}%), renforcé par l'historique d'achat ({als_pct}%)."
    als_dominant: "Les acheteurs de ce produit ont aussi acheté cet article (signal utilisateur : {pct}%)."
    als_reinforced_image: "Les acheteurs de ce produit ont aussi acheté cet article (signal utilisateur : {pct}%), avec une similarité visuelle ({img_pct}%)."
    popularity_dominant: "Article populaire (popularité : {pct}%)."
    fallback: "Recommandé sur la base de signaux combinés."
  en:
    image_dominant: "Visually similar product (image similarity contributes {pct}%)."
    image_reinforced_als: "Visually similar product ({pct}%), reinforced by purchase history ({als_pct}%)."
    als_dominant: "People who bought this also bought that (user signal: {pct}%)."
    als_reinforced_image: "People who bought this also bought that ({pct}%), with visual similarity ({img_pct}%)."
    popularity_dominant: "Popular item (popularity contributes {pct}%)."
    fallback: "Recommended based on combined signals."
